"use strict"

var app = angular.module('amqApp', [
    'ngRoute',
    'mgcrea.bootstrap.affix',
    'ngBackstretch',
    'angular-owl-carousel-2'
]);

app.config(function($routeProvider, $locationProvider) {
    $routeProvider
        .when('/', {
            controller: 'HomeController',
            templateUrl: 'site/views/home.html'
        })
        .when('/edificio/:buildId', {
            controller: 'BuildController',
            templateUrl: 'site/views/build.html'
        })
        .otherwise( { redirectTo: '/' } );

    // use the HTML5 History API
    $locationProvider.html5Mode(true);
});

// Define the `PhoneListController` controller on the `phonecatApp` module
angular.module('amqApp').controller('MainController', function MainController($scope) {
    $scope.name = 'world';
});
/**
 * Created by diegobecerra on 3/20/17.
 */
(function() {

    var BuildController = function ($scope, $routeParams, buildsService) {
        var buildId = $routeParams.buildId;
        $scope.build = null;

        function init() {

            buildsService.getBuild()
                .then(function(response) {
                    for (var i=0,len=response.data.length;i<len;i++) {
                        if (response.data[i].buildId === parseInt(buildId)) {
                            $scope.build = response.data[i];
                        }
                    }
                }, function(data, status, headers, config) {
                    //handle error
                });

        }

        init();
    };

    BuildController.$inject = ['$scope', '$routeParams', 'buildsService'];

    angular.module('amqApp')
        .controller('BuildController', BuildController);

}());
/**
 * Created by diegobecerra on 3/20/17.
 */
(function() {

    var HomeController = function ($scope, $log, $q, buildsService) {
        var owlAPi;
        $scope.items = [
            'site/images/home-carrusel.jpg',
            'site/images/home-carrusel-02.jpg'
        ];

        $scope.properties = {
            // autoHeight:true,
            animateIn: 'fadeIn',
            animateOut: 'fadeOut',
            lazyLoad: true,
            items: 1,
            autoplay: true,
            dots: false,
            loop: true
        };

        $scope.ready = function ($api) {
            owlAPi = $api;
        };

        $scope.builds = [];

        buildsService.getBuilds()
            .then(function(response) {
                if (typeof response.data === 'object') {
                    $scope.builds = response.data;
                } else {
                    // invalid response
                    return $q.reject(response.data);
                }
            }, function(data, status, headers, config) {
                $log.log(data.error + ' ' + status);
            });
    };

    HomeController.$inject = ['$scope', '$log', '$q', 'buildsService'];

    angular.module('amqApp')
        .controller('HomeController', HomeController);

}());
(function() {
    var buildsService = function($http) {
        var builds = {};

        this.getBuilds = function() {
            return $http.get('site/js/builds.json');
        };

        this.getBuild = function() {
            return $http.get('site/js/builds.json');
        };

    };

    buildsService.$inject = ['$http'];

    angular.module('amqApp').service('buildsService', buildsService);

}());
/**
 * Created by diegobecerra on 3/20/17.
 */
